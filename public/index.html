<!doctype html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
	<title>Game of Thrones - Best Episodes</title>
	<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css" type="text/css">
	<link href='https://fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css'>
	<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>

	<style>

		@font-face {
			font-family: 'goffont';
			src: url('/fonts/game_of_thrones-webfont.woff2') format('woff2'),
				 url('/fonts/game_of_thrones-webfont.woff') format('woff'),
				  url('/fonts/game_of_thrones-webfont#game_of_thronesregular.svg') format('svg');

		}

		#page {
			background-image: url("./images/bg.jpg");
			background-repeat: no-repeat;
			background-size: contain;
			padding: 0px;
		}

		#topHalf  {
			height : 400px;
		}

		#topHalf div {
			height: 133px;
		}

		#panneau {
			background-color:rgba(135,156,210, 0.3);
		}

		#bottomHalf {
			height: 500px;
		}

		#bottomHalf {
			background-color: rgb(14,20,20);
			color: white;
		}

		#bottomHalf .w3-half:first-child, #panneau > h1 {
			font-family: 'goffont', 'Times New Roman', serif;


		}

		#bottomHalf > .w3-half:first-child {
			font-size: 200%;	
			text-align: center;
			font-weight: bold;
			/*display: flex;*/
			justify-content: center;
			display: table-cell;
			vertical-align: middle;
		}

		#bottomHalf > .w3-half:first-child > div {
			align-self: center;
			display: inline-block;
		}

		#bottomHalf > .w3-half:first-child span:nth-of-type(2) {
			color: rgb(13,31,68);
		}
	</style>
</head>
<body>

	<div class="w3-container" id="page">

		<!-- <img src="/images/bg.jpg" style="visibility: hidden" > -->
		<div class="w3-row" id="topHalf">

			<div class="w3-row">
				

			</div>

			<div class="w3-row">
				<div class="w3-third">&nbsp;</div>
				<div class="w3-third" id="panneau"><h1>Game of Thrones</h1><p>Best episodes</p></div>
				<div class="w3-third">&nbsp;</div>
			</div>


			<div class="w3-row" >
				
			</div>


		</div>

		<div class="w3-row" id="bottomHalf">
			<div class="w3-half">
				<div><span>Season</span><br><span>6</span></div>
			</div>

			<div class="w3-half" ng-controller="episodesController" ng-app="episodesApp">
				<div class="w3-row" ng-repeat="ep in episodes">
					<div class="w3-third">{{ep.title}}<br>{{ep.duration}}</div>
					<div class="w3-third"></div>
					<div class="w3-third">{{ep.like}}</div>

				</div>
			</div>

		</div>
	</div>


	<script>

		var episodesApp = angular.module('episodesApp',[]);

		episodesApp.controller('episodesController', function($http, $scope) {
			$http.get('/episodes').success(function(response) {
				var res = response;
				res.forEach(function(elt, index, tab) {
					var s = +elt.duration;
					console.log(Math.round(s/60));
					elt.duration = Math.round(s/60) + "min " + (s%60) + " sec";

				});
				$scope.episodes = res;
			});
		});


	</script>


</body>
</html>